import * as S from './styled';

import { useState } from 'react';

import { IMAGE_CONSTANTS } from '@constants/imageConstants';

const TERMS_TEXT = `
제 1장 총칙

제 1조 (목적)
본 약관은 SMART가 운영하는 웹사이트에서 제공하는 SMART 서비스(이하 ‘서비스’) 이용함에 있어 당사자의 권리, 의무 및 책임사항을 규정하는 것을 목적으로 합니다.

제 2조 (정의)

이 약관에서 사용하는 용어의 정의는 다음과 같습니다.

‘서비스’라 함은 설치되어 있는 단말기(PC, 휴대형 단말기 등의 각종 유무선 장치를 포함)와 상관없이 ‘회원’이 이용할 수 있는 SMART 및 SMART 관련 제반 서비스를 의미합니다.

‘회원’이라 함은, ‘회사’의 서비스에 접속하여 이 약관에 따라 ‘회사’와 이용계약을 체결하고 ‘회사’가 제공하는 ‘서비스’를 이용하는 고객을 말합니다.

‘아이디’라 함은 ‘회원’의 식별과 ‘서비스’ 이용을 위하여 ‘회원’이 정하고 ‘회사’가 승인한 문자와 숫자의 조합을 의미합니다.

‘비밀번호’라 함은 ‘회원’이 부여 받은 아이디와 일치되는 ‘회원’임을 확인하고 비밀보호를 위해 ‘회원’이 정한 문자 또는 숫자의 조합을 의미합니다.

‘게시물’이라 함은 ‘회원’이 ‘서비스’를 이용함에 있어 ‘서비스상’에 게시한 부호/문자/음성/음향/화상/동영상 등의 정보 형태의 글, 사진, 동영상 및 각종 파일과 링크를 의미합니다.

제 3조 (약관 외 준칙)
‘회사’는 이 약관의 내용, 상호, 대표자 성명, 영업소 소재지 주소(소비자의 불만을 처리할 수 있는 곳의 주소 포함), 전화번호, 모사전송번호, 전자우편주소, 사업자등록번호, 통신판매업 신고번호 및 개인정보관리책임자 등을 이용자가 쉽게 알 수 있도록 온라인 서비스 초기화면에 게시합니다. 다만, 약관은 이용자가 연결화면을 통하여 볼 수 있도록 할 수 있습니다.
본 약관에서 정하지 아니한 사항은 법령 또는 회사가 정한 서비스의 개별 약관, 운영정책 및 규칙(이하 ‘세부지침’이라 합니다)의 규정에 따릅니다. 또한 본 약관과 세부지침이 충돌할 경우에는 세부지침이 우선합니다.

제 4조 (약관의 명시 및 개정)

‘회사’는 이 약관을 ‘회원’이 그 전부를 인쇄할 수 있고 거래과정에서 해당 약관의 내용을 확인할 수 있도록 기술적 조치를 취합니다.

‘회사’는 ‘회원’이 ‘회사’와 이 약관의 내용에 관하여 질의 및 응답할 수 있도록 기술적 장치를 설치합니다.

‘회사’는 이 약관의 내용을 ‘회원’이 쉽게 알 수 있도록 서비스 초기 화면에 게시하고, ‘회원’이 이 약관에 동의함으로써 이 약관의 효력이 발생합니다. 이 약관은 ‘회원’이 서비스의 이용을 신청함과 동시에 이용계약의 일부로서 효력이 발생하며, 회원은 이 약관에 동의한 시점부터 이 약관의 적용을 받고, 약관의 변경이 있을 경우에는 변경의 효력이 발생한 시점부터 변경된 약관의 적용을 받습니다.

제 5조 (약관의 개정 등)

‘회사’는 온라인 디지털콘텐츠산업 발전법, 전자상거래 등에서의 소비자보호에 관한 법률, 약관의 규제에 관한 법률 등 관련법을 위배하지 않는 범위에서 이 약관을 개정할 수 있습니다.

‘회사’가 약관을 개정할 경우에는 적용일자 및 개정사유를 명시하여 현행약관과 함께 서비스 초기화면에 그 적용일자 7일 이전부터 적용일 후 상당한 기간동안 공지하고, 기존 회원에게는 개정약관을 전자우편주소로 발송합니다.

‘회사’가 약관을 개정할 경우에는 개정약관 공지 후 개정약관의 적용에 대한 ‘회원’의 동의 여부를 확인합니다. ‘회원’이 개정약관의 적용에 동의하지 않는 경우 ‘회사’ 또는 ‘회원’은 콘텐츠 이용계약을 해지할 수 있습니다. 이때, ‘회사’는 계약해지로 인하여 ‘회원’이 입은 손해를 배상합니다.

제 6조 (약관의 해석)
이 약관에서 정하지 아니한 사항과 이 약관의 해석에 관하여는 온라인 디지털콘텐츠산업 발전법, 전자상거래 등에서의 소비자보호에 관한 법률, 약관의 규제에 관한 법률, 문화체육관광부장관이 정하는 디지털콘텐츠이용자보호지침, 기타 관계법령 또는 상관례에 따릅니다.


...
`;

const PRIVACY_TEXT = `
제1조(목적)
‘SMART’(이하 ‘회사’)이 운영하는 ‘SMART’(이하 ‘서비스’)는 개인정보보호법 제30조에 의거하여 이용자의 개인정보 및 권익을 보호하고 이와 관련한 고충 및 불만을 신속하게 처리하기 위하여 아래와 같이 개인정보 처리방침을 수립하여 운영하고 있습니다.
우리 회사는 관계 법령에서 규정하고 있는 책임과 의무를 준수하고 실천하기 위해 최선의 노력을 하고 있습니다.
시행일: 2025.06.09

제2조(개인정보 처리의 원칙)
개인정보 관련 법령 및 본 방침에 따라 회사는 이용자의 개인정보를 수집할 수 있으며, 수집된 개인정보는 개인의 동의가 있는 경우에 한해 제3자에게 제공될 수 있습니다. 단, 법령의 규정 등에 의해 적법하게 강제되는 경우 회사는 수집한 이용자의 개인정보를 사전에 개인의 동의 없이 제3자에게 제공할 수도 있습니다.

제3조(본 방침의 공개)
	1.	회사는 이용자가 언제든지 쉽게 본 방침을 확인할 수 있도록 공개하고 있습니다.
	2.	회사는 본 방침을 사이트 내 연결화면을 통해 글자 크기, 색상 등을 활용하여 쉽게 확인할 수 있도록 합니다.

제4조(본 방침의 변경)
	1.	본 방침은 개인정보 관련 법령, 지침, 고시 또는 정부나 회사 서비스의 정책이나 내용의 변경에 따라 개정될 수 있습니다.
	2.	회사는 본 방침을 개정하는 경우 다음 각 호 하나 이상의 방법으로 공지합니다.
가. 회사가 운영하는 사이트 내에서 공지사항 또는 별도의 창을 통해 공지
나. 서면/모사전송/전자우편 또는 이와 비슷한 방법으로 이용자에게 공지
	3.	회사는 제2항의 공지를 본 방침 개정의 시행일로부터 최소 7일 이전에 공지합니다. 다만, 이용자 권리의 중요한 변경이 있을 경우에는 최소 30일 전에 공지합니다.

제5조(회원 가입을 위한 정보)
회사는 이용자의 회사 서비스에 대한 회원가입을 위하여 다음과 같은 정보를 수집합니다.
	1.	필수 수집 정보: 이름, 자대, 중대, 소대, 직위, 군번, 비밀번호

제6조(본인 인증을 위한 정보)
회사는 이용자의 본인 인증을 위하여 다음과 같은 정보를 수집합니다.
	1.	필수 수집 정보: 군번

제7조(회사 서비스 제공을 위한 정보)
회사는 이용자에게 회사의 서비스를 제공하기 위하여 다음과 같은 정보를 수집합니다.
	1.	필수 수집 정보: 이름, 자대, 중대, 소대, 직위, 군번, 비밀번호

제8조(서비스 이용 및 부정 이용 확인을 위한 정보)
회사는 이용자의 서비스 이용에 따른 통계/분석 및 부정 이용의 확인/분석을 위하여 다음과 같은 정보를 수집합니다.
(부정 이용이란 회원 탈퇴 후 재가입, 상품 구매 후 구매 취소 등을 반복적으로 행하는 등 회사가 제공하는 할인 쿠폰, 이벤트 혜택 등의 경제상 이익을 불/편법적으로 수취하는 행위, 이용약관 등에서 금지하고 있는 행위, 명의 도용 등의 불/편법 행위 등을 말합니다.)
	1.	필수 수집 정보: 서비스 이용 기록

제9조(개인정보 수집 방법)
회사는 다음과 같은 방법으로 이용자의 개인정보를 수집합니다.
	1.	이용자가 회사의 홈페이지에 자신의 개인정보를 입력하는 방식
	2.	어플리케이션 등 회사가 제공하는 홈페이지 외의 서비스를 통해 이용자가 정보를 입력하는 방식
	3.	이용자가 고객센터의 상담, 게시판에서의 활동 등 회사의 서비스를 이용하는 과정에서 입력하는 방식

제10조(개인정보의 이용)
회사는 개인정보를 다음 각 호의 경우에 이용합니다.
	1.	공지사항의 전달 등 회사 운영에 필요한 경우
	2.	이용 문의에 대한 회신, 불만의 처리 등 이용자에 대한 서비스 개선을 위한 경우
	3.	회사의 서비스를 제공하기 위한 경우
	4.	법령 및 회사 약관을 위반하는 회원에 대한 이용 제한 조치, 부정 이용 행위를 포함하여 서비스의 원활한 운영에 지장을 주는 행위에 대한 방지 및 제재를 위한 경우
	5.	신규 서비스 개발을 위한 경우
	6.	인구통계학적 분석, 서비스 방문 및 이용 기록의 분석을 위한 경우

제11조(개인정보의 보유 및 이용 기간)
	1.	회사는 이용자의 개인정보에 대해 개인정보의 수집/이용 목적 달성을 위한 기간 동안 개인정보를 보유 및 이용합니다.
	2.	전항에도 불구하고 회사는 내부 방침에 의해 서비스 부정 이용 기록은 부정 가입 및 이용 방지를 위하여 회원 탈퇴 시점으로부터 최대 1년간 보관합니다.

제12조(법령에 따른 개인정보의 보유 및 이용 기간)
회사는 관계법령에 따라 다음과 같이 개인정보를 보유 및 이용합니다.
	1.	전자상거래 등에서 소비자 보호에 관한 법률에 따른 보유정보 및 보유기간
a. 계약 및 청약 철회 등에 관한 기록 : 5년
b. 대금 결제 및 재화 등의 공급에 관한 기록 : 5년
c. 소비자의 불만 또는 분쟁 처리에 관한 기록 : 3년
d. 표시/광고에 관한 기록 : 6개월
	2.	통신비밀보호법에 따른 보유정보 및 보유기간
a. 웹사이트 로그 기록 자료 : 3개월
	3.	전자금융거래법에 따른 보유정보 및 보유기간
a. 전자금융거래에 관한 기록 : 5년
	4.	위치정보의 보호 및 이용 등에 관한 법률
a. 개인위치정보에 관한 기록 : 6개월

제13조(개인정보의 파기 원칙)
회사는 원칙적으로 이용자의 개인정보 처리 목적의 달성, 보유/이용 기간의 경과 등 개인정보가 필요하지 않을 경우에는 해당 정보를 지체 없이 파기합니다.

제14조(개인정보 파기 절차)
	1.	이용자가 회원가입 등을 위해 입력한 정보는 개인정보 처리 목적이 달성된 후 별도의 DB로 옮겨져 내부 방침 및 기타 관련 법령에 의한 정보 보호 사유에 따라 일정 기간(보유 및 이용 기간 참조) 저장된 후 파기됩니다.
	2.	회사는 파기 사유가 발생한 개인정보를 개인정보 보호 책임자의 승인 절차를 거쳐 파기합니다.

제15조(개인정보 파기 방법)
회사는 전자적 파일 형태로 저장된 개인정보는 기록을 재생할 수 없는 기술적 방법을 사용하여 삭제하며, 종이로 출력된 개인정보는 분쇄기로 분쇄하거나 소각 등을 통하여 파기합니다.

제16조(광고성 정보의 전송 조치)
	1.	회사는 전자적 전송 매체를 이용하여 영리 목적의 광고성 정보를 전송하는 경우 이용자의 명시적인 사전 동의를 받습니다. 다만, 다음 각 호 중 하나에 해당하는 경우에는 사전 동의를 받지 않습니다.
a. 회사가 재화 등의 거래 관계를 통하여 수신자로부터 직접 연락처를 수집한 경우, 거래가 종료된 날로부터 6개월 이내에 회사가 수신자와 거래한 것과 동종의 재화 등에 대한 영리 목적의 광고성 정보를 전송하려는 경우
	2.	회사는 전항에도 불구하고 수신자가 수신 거부 의사를 표시하거나 사전 동의를 철회한 경우에는 광고성 정보를 전송하지 않으며, 수신 거부 및 동의 철회에 대한 처리 결과를 알립니다.
	3.	회사는 오후 9시부터 다음 날 오전 8시까지의 시간에 광고성 정보를 전송하려는 경우 별도의 사전 동의를 받습니다.
	4.	광고성 정보에는 다음 사항을 명시합니다.
a. 회사명 및 연락처
b. 수신 거부 또는 수신 동의 철회 방법
	5.	다음 각 호의 행위를 하지 않습니다.
a. 수신 거부 또는 철회를 방해하는 조치
b. 숫자/부호/문자 조합으로 수신자의 연락처를 자동 생성하는 조치
c. 광고 전송 출처를 숨기는 조치
d. 회신을 유도하기 위한 기망 행위

제17조(개인정보 조회 및 수집 동의 철회)
	1.	이용자 및 법정 대리인은 언제든지 등록된 자신의 개인정보를 조회하거나 수정할 수 있으며, 개인정보 수집 동의를 철회할 수 있습니다.
	2.	철회를 위해서는 개인정보 보호 책임자 또는 담당자에게 서면, 전화, 이메일 등으로 연락하면 지체 없이 조치하겠습니다.

제18조(개인정보 정보 변경 등)
	1.	이용자는 개인정보의 오류에 대한 정정을 요청할 수 있습니다.
	2.	회사는 정정 완료 전까지 개인정보를 이용하거나 제공하지 않으며, 제3자에게 이미 제공된 경우 정정 결과를 지체 없이 통지합니다.

제19조(이용자의 의무)
	1.	이용자는 자신의 개인정보를 최신 상태로 유지해야 하며, 부정확한 정보 입력에 따른 책임은 본인에게 있습니다.
	2.	타인의 개인정보를 도용하여 가입한 경우 자격을 상실하거나 법령에 따라 처벌받을 수 있습니다.
	3.	이메일, 비밀번호 보안을 유지할 책임이 있으며 이를 제3자에게 양도 또는 대여할 수 없습니다.

제20조(회사의 개인정보 관리)
회사는 개인정보가 분실, 도난, 유출, 변조, 훼손되지 않도록 기술적·관리적 보호 대책을 수립·실행합니다.

제21조(삭제된 정보의 처리)
이용자 또는 법정 대리인이 요청한 해지 또는 삭제된 정보는 “보유 및 이용 기간”에 따라 처리되며, 그 외 용도로는 이용하지 않습니다.

제22조(비밀번호의 암호화)
비밀번호는 일방향 암호화 방식으로 저장되며, 본인만이 확인 또는 변경할 수 있습니다.

제23조(해킹 등에 대비한 대책)
	1.	해킹, 바이러스 등을 통한 침입에 대비해 최선의 보안 조치를 취하고 있습니다.
	2.	최신 백신 프로그램과 침입 차단 시스템을 운영하고 있으며, 암호화 통신을 통해 개인정보를 안전하게 전송합니다.

제24조(개인정보 처리 최소화 및 교육)
처리자를 최소한으로 제한하고, 관련 교육을 통해 법령 및 내부 방침의 준수를 강조하고 있습니다.

제25조(개인정보 유출 등에 대한 조치)
유출 사실이 확인되면 지체 없이 아래 사항을 해당 이용자에게 알리고 관련 기관에 신고합니다:
	1.	유출된 개인정보 항목
	2.	유출 시점
	3.	이용자의 취할 수 있는 조치
	4.	회사의 대응 방안
	5.	상담 접수 부서 및 연락처

제26조(개인정보 유출에 대한 조치의 예외)
연락처를 알 수 없는 등 불가피한 경우 회사 홈페이지에 30일 이상 게시하는 방법으로 대체할 수 있습니다.

제27조(국외 이전 개인정보의 보호)
	1.	관계 법령에 반하는 국제 계약을 체결하지 않으며,
	2.	국외 이전 시 사전 동의를 받습니다.
	3.	이전 항목, 국가, 일시, 수신자 및 이용 목적 등을 고지합니다.
	4.	법령에 따라 적절한 보호 조치를 취합니다.

제28조(개인정보 자동 수집 장치의 설치 및 거부)
	1.	쿠키를 사용하여 맞춤형 서비스를 제공합니다.
	2.	이용자는 쿠키 저장을 허용, 확인 또는 거부할 수 있습니다.
	3.	거부 시 일부 서비스 이용이 제한될 수 있습니다.

제29조(쿠키 설정 방법)
	•	Edge: 설정 > 쿠키 및 사이트 권한
	•	Chrome: 설정 > 개인정보 및 보안 > 쿠키
	•	Whale: 설정 > 개인정보 보호 > 쿠키

제30조(개인정보 보호 책임자)
	•	성명: 최효은
	•	직책: CEO
	•	전화번호: 010-4126-5753
	•	이메일: team.eple.official@gmail.com

제31조(권익침해 구제방법)
아래 기관에 문의할 수 있습니다:
	•	개인정보 침해신고센터: privacy.kisa.or.kr / 118
	•	개인정보 분쟁조정위원회: www.kopico.go.kr / 1833-6972
	•	대검찰청 사이버범죄수사단: www.spo.go.kr / 1301
	•	경찰청 사이버안전국: ecrm.police.go.kr / 182

부칙:
본 방침은 2025년 6월 9일부터 시행됩니다.
...
`;

export const TermsModal = ({ onAgree, onCancel }) => {
  const [openDetail, setOpenDetail] = useState(null);

  const handleDetailClose = () => setOpenDetail(null);

  const renderFormattedText = (text) => {
    return text.split('\n').map((line, idx) => {
      if (/^제\s*\d+장/.test(line)) {
        return <S.Chapter key={idx}>{line}</S.Chapter>;
      } else if (/^제\s*\d+조/.test(line)) {
        return <S.Article key={idx}>{line}</S.Article>;
      } else {
        return <S.Paragraph key={idx}>{line}</S.Paragraph>;
      }
    });
  };
  return (
    <S.Wrapper onClick={!openDetail ? onCancel : undefined}>
      <S.Content onClick={(e) => e.stopPropagation()}>
        <S.Title>SMART 필수 약관</S.Title>
        <S.Description>
          <S.Desc>
            (필수) SMART 이용약관
            <S.Icon
              src={IMAGE_CONSTANTS.NOTE}
              onClick={() => setOpenDetail('terms')}
            />
          </S.Desc>

          <S.Desc>
            (필수) 개인정보 수집 및 이용 동의
            <S.Icon
              src={IMAGE_CONSTANTS.NOTE}
              onClick={() => setOpenDetail('privacy')}
            />
          </S.Desc>
        </S.Description>

        <S.ButtonRow>
          <S.AgreeButton onClick={onAgree}>
            동의하고 회원가입 완료하기
          </S.AgreeButton>
        </S.ButtonRow>
      </S.Content>

      {openDetail && (
        <S.Fullscreen onClick={handleDetailClose}>
          <S.FullContent onClick={(e) => e.stopPropagation()}>
            <S.FullTitle>
              {openDetail === 'terms'
                ? 'SMART 이용약관'
                : '개인정보 수집 및 이용 동의'}
              <S.Icon2
                src={IMAGE_CONSTANTS.X}
                onClick={() => setOpenDetail(null)}
              />
            </S.FullTitle>
            <S.FullText>
              {openDetail === 'terms'
                ? renderFormattedText(TERMS_TEXT)
                : renderFormattedText(PRIVACY_TEXT)}
            </S.FullText>
          </S.FullContent>
        </S.Fullscreen>
      )}
    </S.Wrapper>
  );
};

export default TermsModal;
